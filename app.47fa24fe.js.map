{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/Controls.js","webpack:///./src/lib/WebGLApp.js","webpack:///./src/lib/loadTexture.js","webpack:///./src/lib/loadEnvMap.js","webpack:///./src/lib/AssetManager.js","webpack:///./src/lib/monkeyPatch.js","webpack:///./src/scene/Suzanne.js","webpack:///./src/index.js","webpack:///./src/scene/screenshot-record-buttons.js","webpack:///./src/scene/lights.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","controls","mapValues","obj","fn","fromEntries","entries","map","k","v","fromObjectToSlider","State","Slider","min","max","step","scale","mapping","x","Math","pow","inverseMapping","log10","initControls","options","stateObject","controlsState","controlsInstance","hideControls","wrapGUI","expanded","closeControls","styles","style","document","createElement","type","innerHTML","head","appendChild","extractAccessor","fnString","accessorStart","indexOf","trim","wireValue","accessor","toString","$onChanges","cons","wireUniform","includes","lastIndexOf","uniforms","WebGLApp","background","backgroundAlpha","fov","frustumSize","near","far","isRunning","time","dt","performance","now","resize","width","height","pixelRatio","renderer","getPixelRatio","setPixelRatio","setSize","camera","isPerspectiveCamera","aspect","left","right","top","bottom","updateProjectionMatrix","composer","scene","traverse","draw","saveScreenshot","fileName","dataURI","canvas","toDataURL","saveDataURI","startRecording","format","CCapture","workersPath","motionBlurFrames","start","stopRecording","stop","save","undefined","update","xrframe","orbitControls","isTransformControls","world","cannonDebugger","bodies","forEach","body","render","setAnimationLoop","animate","stats","begin","maxDeltaTime","capture","end","this","THREE","antialias","postprocessing","failIfMajorPerformanceCaveat","preserveDrawingBuffer","sortObjects","gamma","outputEncoding","xr","enabled","domElement","setClearColor","maxPixelRatio","orthographic","position","copy","cameraPosition","lookAt","gl","getContext","addEventListener","isDragging","event","isPrimary","offsetX","offsetY","child","onPointerDown","y","dragX","dragY","onPointerMove","onPointerUp","maxMultisampling","getParameter","MAX_SAMPLES","EffectComposer","multisampling","frameBufferType","addPass","RenderPass","OrbitControls","enableDamping","dampingFactor","enablePan","keys","showWorldWireframes","autoUpdate","showFps","Stats","showPanel","dom","loadGPUTier","getGPUTier","glContext","then","gpuTier","gpu","tier","isMobile","fps","getClearColor","getClearAlpha","Boolean","index","innerWidth","innerHeight","devicePixelRatio","cursor","blob","dataURIToBlob","link","download","href","URL","createObjectURL","onclick","setTimeout","revokeObjectURL","removeAttribute","click","loadTexture","url","texture","encoding","setTextureParams","loadImage","crossorigin","image","needsUpdate","initTexture","Error","opt","flipY","isJPEG","search","repeat","wrapS","wrapT","minFilter","magFilter","generateMipmaps","equirectangular","pmrem","pmremEquirectangular","size","highestPowerOfTwo","naturalHeight","renderTarget","outTexture","fromEquirectangularTexture","dispose","basePath","extension","urls","generateCubeUrls","replace","Promise","resolve","reject","HDRCubeTextureLoader","load","cubeMap","assignCubemapOptions","pmremGenerator","compileCubemapShader","fromCubemap","pmremCubemap","compileEquirectangularShader","cubeRenderTarget","fromEquirectangular","prefix","postfix","TypeError","_getQueued","_extractType","find","item","ext","test","itemLoadingStart","Date","_loadItem","DEBUG","console","log","prettyMs","error","queue","total","loadingStart","pMap","logError","percent","concurrency","errors","filter","groupLog","GLTFLoader","err","fetch","response","json","loadEnvMap","arrayBuffer","text","groupCollapsed","groupEnd","monkeyPatch","shader","defines","main","objectNormal","transformed","replaces","patchedShader","str","rep","split","join","stringDefines","suzanneKey","assets","albedoKey","metalnessKey","roughnessKey","normalKey","hdrKey","Suzanne","webgl","suzanneGltf","suzanne","clone","envMap","material","metalnessMap","roughnessMap","normalMap","normalScale","roughness","metalness","onBeforeCompile","frequency","movement","amplitude","vertexShader","isMesh","multiplyScalar","add","coords","set","raycaster","setFromCamera","hits","intersectObject","speed","location","querySelector","alpha","visibility","screenshotButton","hemiLight","color","setHSL","groundColor","dirLight","addNaturalLight","EffectPass","VignetteEffect","padding","margin","borderRadius","fontSize","textContent","recordButton","isRecording","addRecordButton"],"mappings":"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","file":"app.47fa24fe.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([185,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import State from 'controls-state'\nimport wrapGUI from 'controls-gui'\n\nlet controls\n\nfunction mapValues(obj, fn) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v], i) => [k, fn(v, k, i)]))\n}\n\nfunction fromObjectToSlider(object) {\n  return State.Slider(object.value, {\n    min: object.min,\n    max: object.max,\n    step: object.step || 0.01,\n    ...(object.scale === 'exp' && {\n      min: object.min || 0.01,\n      mapping: (x) => Math.pow(10, x),\n      inverseMapping: Math.log10,\n    }),\n  })\n}\n\nexport function initControls(object, options = {}) {\n  const stateObject = mapValues(object, (value) => {\n    if (\n      typeof value === 'object' &&\n      (value.hasOwnProperty('value') ||\n        value.hasOwnProperty('max') ||\n        value.hasOwnProperty('min') ||\n        value.hasOwnProperty('step'))\n    ) {\n      return fromObjectToSlider(value)\n    }\n\n    if (typeof value === 'object') {\n      return mapValues(value, (v) => {\n        if (\n          typeof v === 'object' &&\n          (v.hasOwnProperty('value') ||\n            v.hasOwnProperty('max') ||\n            v.hasOwnProperty('min') ||\n            v.hasOwnProperty('step'))\n        ) {\n          return fromObjectToSlider(v)\n        }\n\n        return value\n      })\n    }\n\n    return value\n  })\n\n  const controlsState = State(stateObject)\n  const controlsInstance = options.hideControls\n    ? controlsState\n    : wrapGUI(controlsState, { expanded: !options.closeControls })\n\n  // add the custom controls-gui styles\n  if (!options.hideControls) {\n    const styles = `\n      [class^=\"controlPanel-\"] [class*=\"__field\"]::before {\n        content: initial !important;\n      }\n      [class^=\"controlPanel-\"] [class*=\"__labelText\"] {\n        text-indent: 6px !important;\n      }\n      [class^=\"controlPanel-\"] [class*=\"__field--button\"] > button::before {\n        content: initial !important;\n      }\n    `\n    const style = document.createElement('style')\n    style.type = 'text/css'\n    style.innerHTML = styles\n    document.head.appendChild(style)\n  }\n\n  controls = controlsInstance\n  return controlsInstance\n}\n\nfunction extractAccessor(fnString) {\n  if (fnString.slice(-1) === '}') {\n    fnString = fnString.slice(0, -1)\n  }\n\n  const accessorStart = fnString.indexOf('.controls.') + '.controls.'.length\n  fnString = fnString.slice(accessorStart)\n\n  return fnString.trim()\n}\n\nexport function wireValue(object, fn) {\n  const fnString = fn.toString()\n  const accessor = extractAccessor(fnString)\n\n  controls.$onChanges((cons) => {\n    if (cons[accessor]) {\n      object[accessor] = cons[accessor].value\n    }\n  })\n\n  return fn()\n}\n\nexport function wireUniform(object, fn) {\n  const fnString = fn.toString()\n  const accessor = extractAccessor(fnString)\n\n  const key = accessor.includes('.') ? accessor.slice(accessor.lastIndexOf('.') + 1) : accessor\n\n  controls.$onChanges((cons) => {\n    if (cons[accessor]) {\n      object.uniforms[key].value = cons[accessor].value\n    }\n  })\n\n  return { value: fn() }\n}\n","import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport dataURIToBlob from 'datauritoblob'\nimport Stats from 'stats.js'\nimport { getGPUTier } from 'detect-gpu'\nimport { EffectComposer, RenderPass } from 'postprocessing'\nimport cannonDebugger from 'cannon-es-debugger'\nimport CCapture from 'ccapture.js'\nimport { initControls } from './Controls'\n\nexport default class WebGLApp {\n  #width\n  #height\n  #capturer\n  isRunning = false\n  time = 0\n  dt = 0\n  #lastTime = performance.now()\n  #updateListeners = []\n  #pointerdownListeners = []\n  #pointermoveListeners = []\n  #pointerupListeners = []\n  #startX\n  #startY\n\n  get background() {\n    return this.render.getClearColor(new THREE.Color())\n  }\n\n  get backgroundAlpha() {\n    return this.render.getClearAlpha()\n  }\n\n  get isRecording() {\n    return Boolean(this.#capturer)\n  }\n\n  constructor({\n    background = '#111',\n    backgroundAlpha = 1,\n    fov = 45,\n    frustumSize = 3,\n    near = 0.01,\n    far = 100,\n    ...options\n  } = {}) {\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: !options.postprocessing,\n      failIfMajorPerformanceCaveat: true,\n      // enabled for recording gifs or videos,\n      // might disable it for performance reasons\n      preserveDrawingBuffer: true,\n      ...options,\n    })\n    if (options.sortObjects !== undefined) {\n      this.renderer.sortObjects = options.sortObjects\n    }\n    if (options.gamma) {\n      this.renderer.outputEncoding = THREE.sRGBEncoding\n    }\n    if (options.xr) {\n      this.renderer.xr.enabled = true\n    }\n\n    this.canvas = this.renderer.domElement\n\n    this.renderer.setClearColor(background, backgroundAlpha)\n\n    // save the fixed dimensions\n    this.#width = options.width\n    this.#height = options.height\n\n    // clamp pixel ratio for performance\n    this.maxPixelRatio = options.maxPixelRatio || 2\n    // clamp delta to avoid stepping anything too far forward\n    this.maxDeltaTime = options.maxDeltaTime || 1 / 30\n\n    // setup the camera\n    const aspect = this.#width / this.#height\n    if (!options.orthographic) {\n      this.camera = new THREE.PerspectiveCamera(fov, aspect, near, far)\n    } else {\n      this.camera = new THREE.OrthographicCamera(\n        -(frustumSize * aspect) / 2,\n        (frustumSize * aspect) / 2,\n        frustumSize / 2,\n        -frustumSize / 2,\n        near,\n        far\n      )\n      this.camera.frustumSize = frustumSize\n    }\n    this.camera.position.copy(options.cameraPosition || new THREE.Vector3(0, 0, 4))\n    this.camera.lookAt(0, 0, 0)\n\n    this.scene = new THREE.Scene()\n\n    this.gl = this.renderer.getContext()\n\n    // handle resize events\n    window.addEventListener('resize', this.resize)\n    window.addEventListener('orientationchange', this.resize)\n\n    // force an initial resize event\n    this.resize()\n\n    // __________________________ADDONS__________________________\n\n    // really basic pointer events handler, the second argument\n    // contains the x and y relative to the top left corner\n    // of the canvas.\n    // In case of touches with multiple fingers, only the\n    // first touch is registered.\n    this.isDragging = false\n    this.canvas.addEventListener('pointerdown', (event) => {\n      if (!event.isPrimary) return\n      this.isDragging = true\n      this.#startX = event.offsetX\n      this.#startY = event.offsetY\n      // call onPointerDown method\n      this.scene.traverse((child) => {\n        if (typeof child.onPointerDown === 'function') {\n          child.onPointerDown(event, { x: event.offsetX, y: event.offsetY })\n        }\n      })\n      // call the pointerdown listeners\n      this.#pointerdownListeners.forEach((fn) => fn(event, { x: event.offsetX, y: event.offsetY }))\n    })\n    this.canvas.addEventListener('pointermove', (event) => {\n      if (!event.isPrimary) return\n      // call onPointerMove method\n      const position = {\n        x: event.offsetX,\n        y: event.offsetY,\n        ...(this.#startX !== undefined && { dragX: event.offsetX - this.#startX }),\n        ...(this.#startY !== undefined && { dragY: event.offsetY - this.#startY }),\n      }\n      this.scene.traverse((child) => {\n        if (typeof child.onPointerMove === 'function') {\n          child.onPointerMove(event, position)\n        }\n      })\n      // call the pointermove listeners\n      this.#pointermoveListeners.forEach((fn) => fn(event, position))\n    })\n    this.canvas.addEventListener('pointerup', (event) => {\n      if (!event.isPrimary) return\n      this.isDragging = false\n      // call onPointerUp method\n      const position = {\n        x: event.offsetX,\n        y: event.offsetY,\n        ...(this.#startX !== undefined && { dragX: event.offsetX - this.#startX }),\n        ...(this.#startY !== undefined && { dragY: event.offsetY - this.#startY }),\n      }\n      this.scene.traverse((child) => {\n        if (typeof child.onPointerUp === 'function') {\n          child.onPointerUp(event, position)\n        }\n      })\n      // call the pointerup listeners\n      this.#pointerupListeners.forEach((fn) => fn(event, position))\n\n      this.#startX = undefined\n      this.#startY = undefined\n    })\n\n    // expose a composer for postprocessing passes\n    if (options.postprocessing) {\n      const maxMultisampling = this.gl.getParameter(this.gl.MAX_SAMPLES)\n      this.composer = new EffectComposer(this.renderer, {\n        multisampling: Math.min(8, maxMultisampling),\n        frameBufferType: options.gamma ? THREE.HalfFloatType : undefined,\n        ...options,\n      })\n      this.composer.addPass(new RenderPass(this.scene, this.camera))\n    }\n\n    // set up OrbitControls\n    if (options.orbitControls) {\n      this.orbitControls = new OrbitControls(this.camera, this.canvas)\n\n      this.orbitControls.enableDamping = true\n      this.orbitControls.dampingFactor = 0.15\n      this.orbitControls.enablePan = false\n\n      if (options.orbitControls instanceof Object) {\n        Object.keys(options.orbitControls).forEach((key) => {\n          this.orbitControls[key] = options.orbitControls[key]\n        })\n      }\n    }\n\n    // Attach the Cannon physics engine\n    if (options.world) {\n      this.world = options.world\n      if (options.showWorldWireframes) {\n        this.cannonDebugger = cannonDebugger(this.scene, this.world.bodies, { autoUpdate: false })\n      }\n    }\n\n    // show the fps meter\n    if (options.showFps) {\n      this.stats = new Stats()\n      this.stats.showPanel(0)\n      document.body.appendChild(this.stats.dom)\n    }\n\n    // initialize the controls-state\n    if (options.controls) {\n      this.controls = initControls(options.controls, options)\n    }\n\n    // detect the gpu info\n    this.loadGPUTier = getGPUTier({ glContext: this.gl }).then((gpuTier) => {\n      this.gpu = {\n        name: gpuTier.gpu,\n        tier: gpuTier.tier,\n        isMobile: gpuTier.isMobile,\n        fps: gpuTier.fps,\n      }\n    })\n  }\n\n  get width() {\n    return this.#width || window.innerWidth\n  }\n\n  get height() {\n    return this.#height || window.innerHeight\n  }\n\n  get pixelRatio() {\n    return Math.min(this.maxPixelRatio, window.devicePixelRatio)\n  }\n\n  resize = ({ width = this.width, height = this.height, pixelRatio = this.pixelRatio } = {}) => {\n    // update pixel ratio if necessary\n    if (this.renderer.getPixelRatio() !== pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio)\n    }\n\n    // setup new size & update camera aspect if necessary\n    this.renderer.setSize(width, height)\n    if (this.camera.isPerspectiveCamera) {\n      this.camera.aspect = width / height\n    } else {\n      const aspect = width / height\n      this.camera.left = -(this.camera.frustumSize * aspect) / 2\n      this.camera.right = (this.camera.frustumSize * aspect) / 2\n      this.camera.top = this.camera.frustumSize / 2\n      this.camera.bottom = -this.camera.frustumSize / 2\n    }\n    this.camera.updateProjectionMatrix()\n\n    // resize also the composer, width and height\n    // are automatically extracted from the renderer\n    if (this.composer) {\n      this.composer.setSize()\n    }\n\n    // recursively tell all child objects to resize\n    this.scene.traverse((obj) => {\n      if (typeof obj.resize === 'function') {\n        obj.resize({\n          width,\n          height,\n          pixelRatio,\n        })\n      }\n    })\n\n    // draw a frame to ensure the new size has been registered visually\n    this.draw()\n    return this\n  }\n\n  // convenience function to trigger a PNG download of the canvas\n  saveScreenshot = ({ width = 1920, height = 1080, fileName = 'Screenshot.png' } = {}) => {\n    // force a specific output size\n    this.resize({ width, height, pixelRatio: 1 })\n    this.draw()\n\n    const dataURI = this.canvas.toDataURL('image/png')\n\n    // reset to default size\n    this.resize()\n    this.draw()\n\n    // save\n    saveDataURI(fileName, dataURI)\n  }\n\n  // start recording of a gif or a video\n  startRecording = ({\n    width = 1920,\n    height = 1080,\n    fileName = 'Recording',\n    format = 'gif',\n    ...options\n  } = {}) => {\n    if (this.#capturer) {\n      return\n    }\n\n    // force a specific output size\n    this.resize({ width, height, pixelRatio: 1 })\n    this.draw()\n\n    this.#capturer = new CCapture({\n      format,\n      name: fileName,\n      workersPath: '',\n      motionBlurFrames: 2,\n      ...options,\n    })\n    this.#capturer.start()\n  }\n\n  stopRecording = () => {\n    if (!this.#capturer) {\n      return\n    }\n\n    this.#capturer.stop()\n    this.#capturer.save()\n    this.#capturer = undefined\n\n    // reset to default size\n    this.resize()\n    this.draw()\n  }\n\n  update = (dt, time, xrframe) => {\n    if (this.orbitControls) {\n      this.orbitControls.update()\n    }\n\n    // recursively tell all child objects to update\n    this.scene.traverse((obj) => {\n      if (typeof obj.update === 'function' && !obj.isTransformControls) {\n        obj.update(dt, time, xrframe)\n      }\n    })\n\n    if (this.world) {\n      // update the cannon-es physics engine\n      this.world.step(1 / 60, dt)\n\n      // update the debug wireframe renderer\n      if (this.cannonDebugger) {\n        this.cannonDebugger.update()\n      }\n\n      // recursively tell all child bodies to update\n      this.world.bodies.forEach((body) => {\n        if (typeof body.update === 'function') {\n          body.update(dt, time)\n        }\n      })\n    }\n\n    // call the update listeners\n    this.#updateListeners.forEach((fn) => fn(dt, time, xrframe))\n\n    return this\n  }\n\n  onUpdate(fn) {\n    this.#updateListeners.push(fn)\n  }\n\n  onPointerDown(fn) {\n    this.#pointerdownListeners.push(fn)\n  }\n\n  onPointerMove(fn) {\n    this.#pointermoveListeners.push(fn)\n  }\n\n  onPointerUp(fn) {\n    this.#pointerupListeners.push(fn)\n  }\n\n  offUpdate(fn) {\n    const index = this.#updateListeners.indexOf(fn)\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return\n    }\n\n    this.#updateListeners.splice(index, 1)\n  }\n\n  offPointerDown(fn) {\n    const index = this.#pointerdownListeners.indexOf(fn)\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return\n    }\n\n    this.#pointerdownListeners.splice(index, 1)\n  }\n\n  offPointerMove(fn) {\n    const index = this.#pointermoveListeners.indexOf(fn)\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return\n    }\n\n    this.#pointermoveListeners.splice(index, 1)\n  }\n\n  offPointerUp(fn) {\n    const index = this.#pointerupListeners.indexOf(fn)\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return\n    }\n\n    this.#pointerupListeners.splice(index, 1)\n  }\n\n  draw = () => {\n    if (this.composer) {\n      this.composer.render(this.dt)\n    } else {\n      this.renderer.render(this.scene, this.camera)\n    }\n    return this\n  }\n\n  start = () => {\n    if (this.isRunning) return\n    this.renderer.setAnimationLoop(this.animate)\n    this.isRunning = true\n    return this\n  }\n\n  stop = () => {\n    if (!this.isRunning) return\n    this.renderer.setAnimationLoop(null)\n    this.isRunning = false\n    return this\n  }\n\n  animate = (now, xrframe) => {\n    if (!this.isRunning) return\n\n    if (this.stats) this.stats.begin()\n\n    this.dt = Math.min(this.maxDeltaTime, (now - this.#lastTime) / 1000)\n    this.time += this.dt\n    this.#lastTime = now\n    this.update(this.dt, this.time, xrframe)\n    this.draw()\n\n    if (this.#capturer) this.#capturer.capture(this.canvas)\n\n    if (this.stats) this.stats.end()\n  }\n\n  get cursor() {\n    return this.canvas.style.cursor\n  }\n\n  set cursor(cursor) {\n    if (cursor) {\n      this.canvas.style.cursor = cursor\n    } else {\n      this.canvas.style.cursor = null\n    }\n  }\n}\n\nfunction saveDataURI(name, dataURI) {\n  const blob = dataURIToBlob(dataURI)\n\n  // force download\n  const link = document.createElement('a')\n  link.download = name\n  link.href = window.URL.createObjectURL(blob)\n  link.onclick = setTimeout(() => {\n    window.URL.revokeObjectURL(blob)\n    link.removeAttribute('href')\n  }, 0)\n\n  link.click()\n}\n","import * as THREE from 'three'\nimport loadImage from 'image-promise'\n\n// TODO maybe add the textureLoader?\nexport default async function loadTexture(url, options) {\n  const texture = new THREE.Texture()\n  texture.name = url\n  texture.encoding = options.encoding || THREE.LinearEncoding\n  setTextureParams(url, texture, options)\n\n  try {\n    const image = await loadImage(url, { crossorigin: 'anonymous' })\n\n    texture.image = image\n    texture.needsUpdate = true\n    if (options.renderer) {\n      // Force texture to be uploaded to GPU immediately,\n      // this will avoid \"jank\" on first rendered frame\n      options.renderer.initTexture(texture)\n    }\n    return texture\n  } catch (err) {\n    throw new Error(`Could not load texture ${url}`)\n  }\n}\n\nfunction setTextureParams(url, texture, opt) {\n  if (typeof opt.flipY === 'boolean') texture.flipY = opt.flipY\n  if (typeof opt.mapping !== 'undefined') {\n    texture.mapping = opt.mapping\n  }\n  if (typeof opt.format !== 'undefined') {\n    texture.format = opt.format\n  } else {\n    // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n    const isJPEG = url.search(/\\.(jpg|jpeg)$/) > 0 || url.search(/^data:image\\/jpeg/) === 0\n    texture.format = isJPEG ? THREE.RGBFormat : THREE.RGBAFormat\n  }\n  if (opt.repeat) texture.repeat.copy(opt.repeat)\n  texture.wrapS = opt.wrapS || THREE.ClampToEdgeWrapping\n  texture.wrapT = opt.wrapT || THREE.ClampToEdgeWrapping\n  texture.minFilter = opt.minFilter || THREE.LinearMipMapLinearFilter\n  texture.magFilter = opt.magFilter || THREE.LinearFilter\n  texture.generateMipmaps = opt.generateMipmaps !== false\n}\n","import * as THREE from 'three'\nimport highestPowerOfTwo from 'highest-power-two'\nimport { HDRCubeTextureLoader } from 'three/examples/jsm/loaders/HDRCubeTextureLoader'\nimport loadTexture from './loadTexture'\n\nexport default async function loadEnvMap(url, options) {\n  const renderer = options.renderer\n\n  if (!renderer) {\n    throw new Error(`Env map requires renderer to passed in the options for ${url}!`)\n  }\n\n  if (options.equirectangular) {\n    const texture = await loadTexture(url, { renderer })\n\n    if (options.pmrem) {\n      return pmremEquirectangular(texture, renderer)\n    } else {\n      const size = highestPowerOfTwo(texture.image.naturalHeight)\n      const renderTarget = new THREE.WebGLCubeRenderTarget(size, {\n        generateMipmaps: true,\n        minFilter: THREE.LinearMipmapLinearFilter,\n        magFilter: THREE.LinearFilter,\n      })\n\n      const outTexture = renderTarget.fromEquirectangularTexture(renderer, texture).texture\n\n      texture.dispose() // dispose original texture\n      texture.image.data = null // remove image reference\n\n      return outTexture\n    }\n  }\n\n  const basePath = url\n  const extension = options.extension || '.jpg'\n  const urls = generateCubeUrls(`${basePath.replace(/\\/$/, '')}/`, extension)\n\n  if (extension === '.hdr') {\n    // load a float HDR texture\n    return new Promise((resolve, reject) => {\n      new HDRCubeTextureLoader().load(\n        THREE.UnsignedByteType,\n        urls,\n        (cubeMap) => resolve(assignCubemapOptions(cubeMap, options)),\n        null,\n        () => reject(new Error(`Could not load env map: ${basePath}`))\n      )\n    })\n  }\n\n  // load a RGBM encoded texture\n  return new Promise((resolve, reject) => {\n    new THREE.CubeTextureLoader().load(\n      urls,\n      (cubeMap) => resolve(assignCubemapOptions(cubeMap, options)),\n      null,\n      () => reject(new Error(`Could not load env map: ${basePath}`))\n    )\n  })\n}\n\nfunction assignCubemapOptions(cubeMap, options) {\n  if (options.encoding) {\n    cubeMap.encoding = options.encoding\n  }\n  if (options.format) {\n    cubeMap.format = options.format\n  }\n  if (options.pmrem) {\n    cubeMap = pmremCubemap(cubeMap, options.renderer)\n  }\n  return cubeMap\n}\n\n// prefilter the environment map for irradiance\nfunction pmremEquirectangular(texture, renderer) {\n  const pmremGenerator = new THREE.PMREMGenerator(renderer)\n  pmremGenerator.compileEquirectangularShader()\n\n  const cubeRenderTarget = pmremGenerator.fromEquirectangular(texture)\n\n  pmremGenerator.dispose() // dispose PMREMGenerator\n  texture.dispose() // dispose original texture\n  texture.image.data = null // remove image reference\n\n  return cubeRenderTarget.texture\n}\n\n// prefilter the environment map for irradiance\nfunction pmremCubemap(cubeMap, renderer) {\n  const pmremGenerator = new THREE.PMREMGenerator(renderer)\n  pmremGenerator.compileCubemapShader()\n  const renderTarget = pmremGenerator.fromCubemap(cubeMap)\n\n  pmremGenerator.dispose() // dispose PMREMGenerator\n  cubeMap.dispose() // dispose original texture\n  cubeMap.image.data = null // remove image reference\n\n  return renderTarget.texture\n}\n\nfunction generateCubeUrls(prefix, postfix) {\n  return [\n    `${prefix}px${postfix}`,\n    `${prefix}nx${postfix}`,\n    `${prefix}py${postfix}`,\n    `${prefix}ny${postfix}`,\n    `${prefix}pz${postfix}`,\n    `${prefix}nz${postfix}`,\n  ]\n}\n","import pMap from 'p-map'\nimport prettyMs from 'pretty-ms'\nimport loadImage from 'image-promise'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport loadTexture from './loadTexture'\nimport loadEnvMap from './loadEnvMap'\n\nclass AssetManager {\n  #queue = []\n  #cache = {}\n  #onProgressListeners = []\n  #asyncConcurrency = 10\n  #logs = []\n\n  addProgressListener(fn) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('onProgress must be a function')\n    }\n    this.#onProgressListeners.push(fn)\n  }\n\n  // Add an asset to be queued, input: { url, type, ...options }\n  queue({ url, type, ...options }) {\n    if (!url) throw new TypeError('Must specify a URL or opt.url for AssetManager.queue()')\n    if (!this._getQueued(url)) {\n      this.#queue.push({ url, type: type || this._extractType(url), ...options })\n    }\n\n    return url\n  }\n\n  _getQueued(url) {\n    return this.#queue.find((item) => item.url === url)\n  }\n\n  _extractType(url) {\n    const ext = url.slice(url.lastIndexOf('.'))\n\n    switch (true) {\n      case /\\.(gltf|glb)$/i.test(ext):\n        return 'gltf'\n      case /\\.json$/i.test(ext):\n        return 'json'\n      case /\\.svg$/i.test(ext):\n        return 'svg'\n      case /\\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(ext):\n        return 'image'\n      case /\\.(wav|mp3)$/i.test(ext):\n        return 'audio'\n      case /\\.(mp4|webm|ogg|ogv)$/i.test(ext):\n        return 'video'\n      default:\n        throw new Error(`Could not load ${url}, unknown file extension!`)\n    }\n  }\n\n  // Fetch a loaded asset by URL\n  get = (url) => {\n    if (!url) throw new TypeError('Must specify an URL for AssetManager.get()')\n\n    return this.#cache[url]\n  }\n\n  // Loads a single asset\n  async loadSingle({ renderer, ...item }) {\n    // renderer is used to load textures and env maps,\n    // but require it always since it is an extensible pattern\n    if (!renderer) {\n      throw new Error('You must provide a renderer to the loadSingle function.')\n    }\n\n    try {\n      const itemLoadingStart = Date.now()\n\n      this.#cache[item.url] = await this._loadItem({ renderer, ...item })\n\n      if (window.DEBUG) {\n        console.log(\n          `📦 Loaded single asset %c${item.url}%c in ${prettyMs(Date.now() - itemLoadingStart)}`,\n          'color:blue',\n          'color:black'\n        )\n      }\n\n      return item.url\n    } catch (err) {\n      delete this.#cache[item.url]\n      console.error(`📦 Asset ${item.url} was not loaded:\\n${err}`)\n    }\n  }\n\n  // Loads all queued assets\n  async load({ renderer }) {\n    // renderer is used to load textures and env maps,\n    // but require it always since it is an extensible pattern\n    if (!renderer) {\n      throw new Error('You must provide a renderer to the load function.')\n    }\n\n    const queue = this.#queue.slice()\n    this.#queue.length = 0 // clear queue\n\n    const total = queue.length\n    if (total === 0) {\n      // resolve first this functions and then call the progress listeners\n      setTimeout(() => this.#onProgressListeners.forEach((fn) => fn(1)), 0)\n      return\n    }\n\n    const loadingStart = Date.now()\n\n    await pMap(\n      queue,\n      async (item, i) => {\n        try {\n          const itemLoadingStart = Date.now()\n\n          this.#cache[item.url] = await this._loadItem({ renderer, ...item })\n\n          if (window.DEBUG) {\n            this.log(\n              `Loaded %c${item.url}%c in ${prettyMs(Date.now() - itemLoadingStart)}`,\n              'color:blue',\n              'color:black'\n            )\n          }\n        } catch (err) {\n          this.logError(`Asset ${item.url} was not loaded:\\n${err}`)\n        }\n\n        const percent = (i + 1) / total\n        this.#onProgressListeners.forEach((fn) => fn(percent))\n      },\n      { concurrency: this.#asyncConcurrency }\n    )\n\n    if (window.DEBUG) {\n      const errors = this.#logs.filter((log) => log.type === 'error')\n\n      if (errors.length === 0) {\n        this.groupLog(`📦 Assets loaded in ${prettyMs(Date.now() - loadingStart)} ⏱`)\n      } else {\n        this.groupLog(\n          `📦 %c Could not load ${errors.length} asset${errors.length > 1 ? 's' : ''} `,\n          'color:white;background:red;'\n        )\n      }\n    }\n  }\n\n  // Loads a single asset on demand, returning from\n  // cache if it exists otherwise adding it to the cache\n  // after loading.\n  _loadItem({ url, type, renderer, ...options }) {\n    if (url in this.#cache) {\n      return this.#cache[url]\n    }\n\n    switch (type) {\n      case 'gltf':\n        return new Promise((resolve, reject) => {\n          new GLTFLoader().load(url, resolve, null, (err) =>\n            reject(new Error(`Could not load GLTF asset ${url}:\\n${err}`))\n          )\n        })\n      case 'json':\n        return fetch(url).then((response) => response.json())\n      case 'env-map':\n        return loadEnvMap(url, { renderer, ...options })\n      case 'svg':\n      case 'image':\n        return loadImage(url, { crossorigin: 'anonymous' })\n      case 'texture':\n        return loadTexture(url, { renderer, ...options })\n      case 'audio':\n        // You might not want to load big audio files and\n        // store them in memory, that might be inefficient.\n        // Rather load them outside of the queue\n        return fetch(url).then((response) => response.arrayBuffer())\n      case 'video':\n        // You might not want to load big video files and\n        // store them in memory, that might be inefficient.\n        // Rather load them outside of the queue\n        return fetch(url).then((response) => response.blob())\n      default:\n        throw new Error(`Could not load ${url}, the type ${type} is unknown!`)\n    }\n  }\n\n  log(...text) {\n    this.#logs.push({ type: 'log', text })\n  }\n\n  logError(...text) {\n    this.#logs.push({ type: 'error', text })\n  }\n\n  groupLog(...text) {\n    console.groupCollapsed(...text)\n    this.#logs.forEach((log) => {\n      console[log.type](...log.text)\n    })\n    console.groupEnd()\n\n    this.#logs.length = 0 // clear logs\n  }\n}\n\n// asset manager is a singleton, you can require it from\n// different files and use the same instance.\n// A plain js object would have worked just fine,\n// fucking java patterns\nexport default new AssetManager()\n","export function monkeyPatch(\n  shader,\n  { defines = '', head = '', main = '', objectNormal, transformed, ...replaces }\n) {\n  let patchedShader = shader\n\n  const replaceAll = (str, find, rep) => str.split(find).join(rep)\n  Object.keys(replaces).forEach((key) => {\n    patchedShader = replaceAll(patchedShader, key, replaces[key])\n  })\n\n  patchedShader = patchedShader.replace(\n    'void main() {',\n    `\n    ${head}\n    void main() {\n      ${main}\n    `\n  )\n\n  if (transformed && patchedShader.includes('#include <begin_vertex>')) {\n    patchedShader = patchedShader.replace(\n      '#include <begin_vertex>',\n      `#include <begin_vertex>\n      ${transformed}\n      `\n    )\n  }\n\n  if (objectNormal && patchedShader.includes('#include <beginnormal_vertex>')) {\n    patchedShader = patchedShader.replace(\n      '#include <beginnormal_vertex>',\n      `#include <beginnormal_vertex>\n      ${objectNormal}\n      `\n    )\n  }\n\n  const stringDefines = Object.keys(defines)\n    .map((d) => `#define ${d} ${defines[d]}`)\n    .join('\\n')\n\n  return `\n    ${stringDefines}\n    ${patchedShader}\n  `\n}\n","import * as THREE from 'three'\nimport glsl from 'glslify'\nimport assets from '../lib/AssetManager'\nimport { monkeyPatch } from '../lib/monkeyPatch'\nimport { wireValue, wireUniform } from '../lib/Controls'\n\n// elaborated three.js component example\n// containing example usage of\n//   - asset manager\n//   - control panel\n//   - touch events\n//   - postprocessing\n//   - screenshot saving\n\n// preload the suzanne model\nconst suzanneKey = assets.queue({\n  url: 'assets/suzanne.gltf',\n  type: 'gltf',\n})\n\n// preload the materials\nconst albedoKey = assets.queue({\n  url: 'assets/spotty-metal/albedo.jpg',\n  type: 'texture',\n  // encoding: THREE.sRGBEncoding,\n})\nconst metalnessKey = assets.queue({\n  url: 'assets/spotty-metal/metalness.jpg',\n  type: 'texture',\n})\nconst roughnessKey = assets.queue({\n  url: 'assets/spotty-metal/roughness.jpg',\n  type: 'texture',\n})\nconst normalKey = assets.queue({\n  url: 'assets/spotty-metal/normal.jpg',\n  type: 'texture',\n})\n\n// preload the environment map\nconst hdrKey = assets.queue({\n  url: 'assets/ouside-afternoon-blurred-hdr.jpg',\n  type: 'env-map',\n  // equirectangular means it's just one image, projected\n  equirectangular: true,\n  // encoding: THREE.sRGBEncoding,\n})\n\nexport default class Suzanne extends THREE.Group {\n  constructor(webgl, options = {}) {\n    super(options)\n    this.webgl = webgl\n    this.options = options\n\n    const suzanneGltf = assets.get(suzanneKey)\n    const suzanne = suzanneGltf.scene.clone()\n\n    // TODO fix assets and gamma\n    const map = assets.get(albedoKey)\n    const envMap = assets.get(hdrKey)\n    map.encoding = THREE.sRGBEncoding\n    envMap.encoding = THREE.sRGBEncoding\n\n    const material = new THREE.MeshStandardMaterial({\n      map,\n      metalnessMap: assets.get(metalnessKey),\n      roughnessMap: assets.get(roughnessKey),\n      normalMap: assets.get(normalKey),\n      normalScale: new THREE.Vector2(2, 2),\n      envMap,\n      roughness: webgl.controls.roughness,\n      metalness: 1,\n    })\n    this.material = material\n\n    wireValue(material, () => webgl.controls.roughness)\n\n    material.onBeforeCompile = (shader) => {\n      // expose the uniforms\n      material.uniforms = shader.uniforms\n\n      shader.uniforms.time = { value: 0 }\n      shader.uniforms.frequency = wireUniform(shader, () => webgl.controls.movement.frequency)\n      shader.uniforms.amplitude = wireUniform(shader, () => webgl.controls.movement.amplitude)\n\n      shader.vertexShader = monkeyPatch(shader.vertexShader, {\n        head: glsl`\n          uniform float time;\n          uniform float frequency;\n          uniform float amplitude;\n\n          // you could import glsl packages like this\n          // #pragma glslify: noise = require(glsl-noise/simplex/3d)\n        `,\n        main: glsl`\n          float theta = sin(position.z * frequency + time) * amplitude;\n          float c = cos(theta);\n          float s = sin(theta);\n          mat3 deformMatrix = mat3(c, 0, s, 0, 1, 0, -s, 0, c);\n        `,\n        // hook that lets you modify the normal\n        objectNormal: glsl`\n          objectNormal *= deformMatrix;\n        `,\n        // hook that lets you modify the position\n        transformed: glsl`\n          transformed *= deformMatrix;\n        `,\n      })\n    }\n\n    // apply the material to the model\n    suzanne.traverse((child) => {\n      if (child.isMesh) {\n        child.material = material\n      }\n    })\n\n    // make it a little bigger\n    suzanne.scale.multiplyScalar(1.2)\n\n    this.add(suzanne)\n\n    // set the background as the hdr\n    this.webgl.scene.background = envMap\n  }\n\n  onPointerDown(event, { x, y }) {\n    // for example, check of we clicked on an\n    // object with raycasting\n    const coords = new THREE.Vector2().set(\n      (x / this.webgl.width) * 2 - 1,\n      (-y / this.webgl.height) * 2 + 1\n    )\n    const raycaster = new THREE.Raycaster()\n    raycaster.setFromCamera(coords, this.webgl.camera)\n    const hits = raycaster.intersectObject(this, true)\n    console.log(hits.length > 0 ? `Hit ${hits[0].object.name}!` : 'No hit')\n    // this, of course, doesn't take into consideration the\n    // mesh deformation in the vertex shader\n  }\n\n  onPointerMove(event, { x, y }) {}\n\n  onPointerUp(event, { x, y }) {}\n\n  update(dt, time) {\n    if (this.material.uniforms) {\n      this.material.uniforms.time.value += dt * this.webgl.controls.movement.speed\n    }\n  }\n}\n","import { EffectPass, VignetteEffect } from 'postprocessing'\nimport WebGLApp from './lib/WebGLApp'\nimport assets from './lib/AssetManager'\nimport Suzanne from './scene/Suzanne'\nimport { addNaturalLight } from './scene/lights'\nimport { addScreenshotButton, addRecordButton } from './scene/screenshot-record-buttons'\n\n// true if the url has the `?debug` parameter, otherwise false\nwindow.DEBUG = window.location.search.includes('debug')\n\n// grab our canvas\nconst canvas = document.querySelector('#app')\n\n// setup the WebGLRenderer\nconst webgl = new WebGLApp({\n  canvas,\n  // enable transparency\n  alpha: true,\n  // set the scene background color\n  background: '#111',\n  backgroundAlpha: 1,\n  // enable gamma correction, read more about it here:\n  // https://www.donmccurdy.com/2020/06/17/color-management-in-threejs/\n  gamma: true,\n  // enable postprocessing\n  postprocessing: true,\n  // show the fps counter from stats.js\n  showFps: window.DEBUG,\n  // enable OrbitControls\n  orbitControls: window.DEBUG,\n  // Add the controls pane inputs\n  controls: {\n    roughness: 0.5,\n    movement: {\n      speed: {\n        value: 1.5,\n        max: 100,\n        scale: 'exp',\n      },\n      frequency: { value: 0.5, max: 5 },\n      amplitude: { value: 0.7, max: 2 },\n    },\n  },\n  hideControls: !window.DEBUG,\n  // enable cannon-es\n  // world: new CANNON.World(),\n})\n\n// attach it to the window to inspect in the console\nif (window.DEBUG) {\n  window.webgl = webgl\n}\n\n// hide canvas\nwebgl.canvas.style.visibility = 'hidden'\n\n// load any queued assets\nassets.load({ renderer: webgl.renderer }).then(() => {\n  // show canvas\n  webgl.canvas.style.visibility = ''\n\n  // add any \"WebGL components\" here...\n  // append them to the scene so you can\n  // use them from other components easily\n  webgl.scene.suzanne = new Suzanne(webgl)\n  webgl.scene.add(webgl.scene.suzanne)\n\n  // lights and other scene related stuff\n  addNaturalLight(webgl)\n\n  // postprocessing\n  // add an existing effect from the postprocessing library\n  webgl.composer.addPass(new EffectPass(webgl.camera, new VignetteEffect()))\n\n  // add the save screenshot and save gif buttons\n  if (window.DEBUG) {\n    addScreenshotButton(webgl)\n    addRecordButton(webgl)\n  }\n\n  // start animation loop\n  webgl.start()\n})\n","// demo the save screenshot feature\nexport function addScreenshotButton(webgl) {\n  const screenshotButton = document.createElement('div')\n\n  // normally the styles would be in style.css\n  screenshotButton.style.position = 'fixed'\n  screenshotButton.style.bottom = 0\n  screenshotButton.style.right = 0\n  screenshotButton.style.background = 'tomato'\n  screenshotButton.style.cursor = 'pointer'\n  screenshotButton.style.padding = '8px 16px'\n  screenshotButton.style.margin = '12px'\n  screenshotButton.style.borderRadius = '3px'\n  screenshotButton.style.color = 'white'\n  screenshotButton.style.fontSize = '24px'\n\n  screenshotButton.textContent = '📸 Save screenshot'\n  screenshotButton.addEventListener('click', webgl.saveScreenshot)\n\n  document.body.appendChild(screenshotButton)\n}\n\n// demo the save video feature\nexport function addRecordButton(webgl) {\n  const recordButton = document.createElement('div')\n\n  // normally the styles would be in style.css\n  recordButton.style.position = 'fixed'\n  recordButton.style.bottom = 0\n  recordButton.style.left = 0\n  recordButton.style.background = 'tomato'\n  recordButton.style.cursor = 'pointer'\n  recordButton.style.padding = '8px 16px'\n  recordButton.style.margin = '12px'\n  recordButton.style.borderRadius = '3px'\n  recordButton.style.color = 'white'\n  recordButton.style.fontSize = '24px'\n\n  recordButton.textContent = '🔴 Start recording gif'\n  recordButton.addEventListener('click', () => {\n    if (!webgl.isRecording) {\n      webgl.startRecording()\n      recordButton.textContent = '🟥 Stop recording gif'\n    } else {\n      webgl.stopRecording()\n      recordButton.textContent = '🔴 Start recording gif'\n    }\n  })\n\n  document.body.appendChild(recordButton)\n}\n","import * as THREE from 'three'\n\n// natural hemisphere light from\n// https://threejs.org/examples/#webgl_lights_hemisphere\nexport function addNaturalLight(webgl) {\n  const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6)\n  hemiLight.color.setHSL(0.6, 1, 0.6)\n  hemiLight.groundColor.setHSL(0.095, 1, 0.75)\n  hemiLight.position.set(0, 50, 0)\n  webgl.scene.add(hemiLight)\n\n  const dirLight = new THREE.DirectionalLight(0xffffff, 1)\n  dirLight.color.setHSL(0.1, 1, 0.95)\n  dirLight.position.set(3, 5, 1)\n  dirLight.position.multiplyScalar(50)\n  webgl.scene.add(dirLight)\n}\n"],"sourceRoot":""}