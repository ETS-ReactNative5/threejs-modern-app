!function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([167,1]),n()}({159:function(e,t){},167:function(e,t,n){"use strict";n.r(t);n(110),n(117),n(28),n(120),n(78);var r=n(0),o=n(34),i=n.n(o),a=n(27),s=(n(81),n(126),n(57),n(128),n(129),n(32),n(88),n(89),n(131),n(91),n(132),n(101)),c=n(102),u=n.n(c),l=n(103),p=n.n(l),f=n(104),h=n.n(f),d=n(105),m=n(2),v=n.n(m);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tmpVec0=new v.a.Vec3,this.tmpVec1=new v.a.Vec3,this.tmpVec2=new v.a.Vec3,this.tmpQuat0=new v.a.Vec3,this.scene=t,this.world=n,this._meshes=[],this._material=new r.cb({color:65280,wireframe:!0}),this._sphereGeometry=new r.Lb(1),this._boxGeometry=new r.d(1,1,1),this._planeGeometry=new r.qb(10,10,10,10),this._cylinderGeometry=new r.m(1,1,10,10)}var t,n,o;return t=e,(n=[{key:"update",value:function(){for(var e=this.world.bodies,t=this._meshes,n=this.tmpVec0,r=this.tmpQuat0,o=0,i=0;i!==e.length;i++)for(var a=e[i],s=0;s!==a.shapes.length;s++){var c=a.shapes[s];this._updateMesh(o,a,c);var u=t[o];u&&(a.quaternion.vmult(a.shapeOffsets[s],n),a.position.vadd(n,n),a.quaternion.mult(a.shapeOrientations[s],r),u.position.copy(n),u.quaternion.copy(r),"visible"in a&&(u.visible=a.visible)),o+=1}for(var l=o;l<t.length;l++){var p=t[l];p&&this.scene.remove(p)}t.length=o}},{key:"_updateMesh",value:function(e,t,n){var r=this._meshes[e];this._typeMatch(r,n)||(r&&this.scene.remove(r),r=this._meshes[e]=this._createMesh(n)),this._scaleMesh(r,n)}},{key:"_createMesh",value:function(e){var t,n=this._material,o=new r.z;switch(e.type){case v.a.Shape.types.SPHERE:t=new r.bb(this._sphereGeometry,n);break;case v.a.Shape.types.BOX:t=new r.bb(this._boxGeometry,n);break;case v.a.Shape.types.PLANE:t=new r.bb(this._planeGeometry,n);break;case v.a.Shape.types.CONVEXPOLYHEDRON:for(var i=0;i<e.vertices.length;i++){var a=e.vertices[i];o.vertices.push(new r.Zb(a.x,a.y,a.z))}for(var s=0;s<e.faces.length;s++)for(var c=e.faces[s],u=c[0],l=1;l<c.length-1;l++){var p=c[l],f=c[l+1];o.faces.push(new r.v(u,p,f))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new r.bb(o,n),e.geometryId=o.id;break;case v.a.Shape.types.TRIMESH:for(var h=0;h<e.indices.length/3;h++){e.getTriangleVertices(h,this.tmpVec0,this.tmpVec1,this.tmpVec2),o.vertices.push(new r.Zb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new r.Zb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new r.Zb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var d=o.vertices.length-3;o.faces.push(new r.v(d,d+1,d+2))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new r.bb(o,n),e.geometryId=o.id;break;case v.a.Shape.types.HEIGHTFIELD:for(var m=0;m<e.data.length-1;m++)for(var y=0;y<e.data[m].length-1;y++)for(var g=0;g<2;g++){e.getConvexTrianglePillar(m,y,0===g),this.tmpVec0.copy(e.pillarConvex.vertices[0]),this.tmpVec1.copy(e.pillarConvex.vertices[1]),this.tmpVec2.copy(e.pillarConvex.vertices[2]),this.tmpVec0.vadd(e.pillarOffset,this.tmpVec0),this.tmpVec1.vadd(e.pillarOffset,this.tmpVec1),this.tmpVec2.vadd(e.pillarOffset,this.tmpVec2),o.vertices.push(new r.Zb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new r.Zb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new r.Zb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var b=o.vertices.length-3;o.faces.push(new r.v(b,b+1,b+2))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new r.bb(o,n),e.geometryId=o.id}return t&&this.scene.add(t),t}},{key:"_typeMatch",value:function(e,t){if(!e)return!1;var n=e.geometry;return n instanceof r.Lb&&t instanceof v.a.Sphere||n instanceof r.d&&t instanceof v.a.Box||n instanceof r.qb&&t instanceof v.a.Plane||n.id===t.geometryId&&t instanceof v.a.ConvexPolyhedron||n.id===t.geometryId&&t instanceof v.a.Trimesh||n.id===t.geometryId&&t instanceof v.a.Heightfield}},{key:"_scaleMesh",value:function(e,t){var n=t.radius;switch(t.type){case v.a.Shape.types.SPHERE:e.scale.set(n,n,n);break;case v.a.Shape.types.BOX:e.scale.copy(t.halfExtents),e.scale.multiplyScalar(2);break;case v.a.Shape.types.CONVEXPOLYHEDRON:e.scale.set(1,1,1);break;case v.a.Shape.types.TRIMESH:e.scale.copy(t.scale);break;case v.a.Shape.types.HEIGHTFIELD:e.scale.set(1,1,1)}}}])&&y(t.prototype,n),o&&y(t,o),e}();function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var E=0;function k(e){return"__private_"+E+++"_"+e}var _=k("width"),C=k("height"),D=k("lastTime"),R=k("updateListeners"),V=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.background,c=void 0===o?"#111":o,u=n.backgroundAlpha,l=void 0===u?1:u,f=n.fov,m=void 0===f?45:f,v=n.frustumSize,y=void 0===v?3:v,b=n.near,O=void 0===b?.01:b,j=n.far,E=void 0===j?100:j,k=x(n,["background","backgroundAlpha","fov","frustumSize","near","far"]);P(this,e),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.isRunning=!1,this.time=0,this.dt=0,Object.defineProperty(this,D,{writable:!0,value:performance.now()}),Object.defineProperty(this,R,{writable:!0,value:[]}),this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?t.width:n,o=e.height,i=void 0===o?t.height:o,a=e.pixelRatio,s=void 0===a?t.pixelRatio:a;if(t.renderer.getPixelRatio()!==s&&t.renderer.setPixelRatio(s),t.renderer.setSize(r,i),t.camera.isPerspectiveCamera)t.camera.aspect=r/i;else{var c=r/i;t.camera.left=-t.camera.frustumSize*c/2,t.camera.right=t.camera.frustumSize*c/2,t.camera.top=t.camera.frustumSize/2,t.camera.bottom=-t.camera.frustumSize/2}return t.camera.updateProjectionMatrix(),t.composer&&t.composer.setSize(),t.scene.traverse((function(e){"function"==typeof e.resize&&e.resize({width:r,height:i,pixelRatio:s})})),t.draw(),t},this.saveScreenshot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?2560:n,o=e.height,i=void 0===o?1440:o,a=e.fileName,s=void 0===a?"Screenshot.png":a;t.resize({width:r,height:i,pixelRatio:1}),t.draw();var c=t.canvas.toDataURL("image/png");t.resize(),t.draw(),M(s,c)},this.update=function(e,n,r){return t.orbitControls&&t.orbitControls.update(),t.scene.traverse((function(t){"function"!=typeof t.update||t.isTransformControls||t.update(e,n,r)})),t.world&&(t.world.step(1/60,e),t.cannonDebugRenderer&&t.cannonDebugRenderer.update(),t.world.bodies.forEach((function(t){"function"==typeof t.update&&t.update(e,n)}))),S(t,R)[R].forEach((function(t){return t(e,n,r)})),t},this.draw=function(){return t.composer?t.composer.render(t.dt):t.renderer.render(t.scene,t.camera),t},this.start=function(){if(!t.isRunning)return t.renderer.setAnimationLoop(t.animate),t.isRunning=!0,t},this.stop=function(){if(t.isRunning)return t.renderer.setAnimationLoop(null),t.isRunning=!1,t},this.animate=function(e,n){t.isRunning&&(t.stats&&t.stats.begin(),t.dt=Math.min(t.maxDeltaTime,(e-S(t,D)[D])/1e3),t.time+=t.dt,S(t,D)[D]=e,t.update(t.dt,t.time,n),t.draw(),t.stats&&t.stats.end())},this.renderer=new r.fc(w({antialias:!k.postprocessing,alpha:!1,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!0},k)),void 0!==k.sortObjects&&(this.renderer.sortObjects=k.sortObjects),k.gamma&&(this.renderer.outputEncoding=r.gc),k.xr&&(this.renderer.xr.enabled=!0),this.canvas=this.renderer.domElement,this.renderer.setClearColor(c,l),S(this,_)[_]=k.width,S(this,C)[C]=k.height,this.maxPixelRatio=k.maxPixelRatio||2,this.maxDeltaTime=k.maxDeltaTime||1/30;var V=S(this,_)[_]/S(this,C)[C];if(k.orthographic?(this.camera=new r.nb(-y*V/2,y*V/2,y/2,-y/2,O,E),this.camera.frustumSize=y):this.camera=new r.pb(m,V,O,E),this.camera.position.copy(k.cameraPosition||new r.Zb(0,0,4)),this.camera.lookAt(0,0,0),this.scene=new r.Gb,this.gl=this.renderer.getContext(),window.addEventListener("resize",this.resize),window.addEventListener("orientationchange",this.resize),this.resize(),this.isDragging=!1,this.canvas.addEventListener("pointerdown",(function(e){e.isPrimary&&(t.isDragging=!0,t.scene.traverse((function(t){"function"==typeof t.onPointerDown&&t.onPointerDown(e,{x:e.offsetX,y:e.offsetY})})))})),this.canvas.addEventListener("pointermove",(function(e){e.isPrimary&&t.scene.traverse((function(t){"function"==typeof t.onPointerMove&&t.onPointerMove(e,{x:e.offsetX,y:e.offsetY})}))})),this.canvas.addEventListener("pointerup",(function(e){e.isPrimary&&(t.isDragging=!1,t.scene.traverse((function(t){"function"==typeof t.onPointerUp&&t.onPointerUp(e,{x:e.offsetX,y:e.offsetY})})))})),k.postprocessing){var L=this.gl.getParameter(this.gl.MAX_SAMPLES);this.composer=new a.a(this.renderer,w({multisampling:Math.min(8,L),frameBufferType:k.gamma?r.B:void 0},k)),this.composer.addPass(new a.b(this.scene,this.camera))}if(k.orbitControls&&(this.orbitControls=new s.a(this.camera,this.canvas),this.orbitControls.enableDamping=!0,this.orbitControls.dampingFactor=.15,this.orbitControls.enablePan=!1,k.orbitControls instanceof Object&&Object.keys(k.orbitControls).forEach((function(e){t.orbitControls[e]=k.orbitControls[e]}))),k.world&&(this.world=k.world,k.showWorldWireframes&&(this.cannonDebugRenderer=new g(this.scene,this.world))),k.showFps&&(this.stats=new p.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)),k.controls){var T=i()(k.controls);if(this.controls=k.hideControls?T:h()(T,{expanded:!k.closeControls}),!k.hideControls){var z='\n          [class^="controlPanel-"] [class*="__field"]::before {\n            content: initial !important;\n          }\n          [class^="controlPanel-"] [class*="__labelText"] {\n            text-indent: 6px !important;\n          }\n          [class^="controlPanel-"] [class*="__field--button"] > button::before {\n            content: initial !important;\n          }\n        ',U=document.createElement("style");U.type="text/css",U.innerHTML=z,document.head.appendChild(U)}}this.loadGPUTier=Object(d.a)({glContext:this.gl}).then((function(e){t.gpu={name:e.gpu,tier:e.tier,isMobile:e.isMobile,fps:e.fps}}))}var t,n,o;return t=e,(n=[{key:"onUpdate",value:function(e){S(this,R)[R].push(e)}},{key:"offUpdate",value:function(e){var t=S(this,R)[R].indexOf(e);-1!==t&&S(this,R)[R].splice(t,1)}},{key:"width",get:function(){return S(this,_)[_]||window.innerWidth}},{key:"height",get:function(){return S(this,C)[C]||window.innerHeight}},{key:"pixelRatio",get:function(){return Math.min(this.maxPixelRatio,window.devicePixelRatio)}},{key:"cursor",get:function(){return this.canvas.style.cursor},set:function(e){this.canvas.style.cursor=e||null}}])&&j(t.prototype,n),o&&j(t,o),e}();function M(e,t){var n=u()(t),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(n),r.onclick=setTimeout((function(){window.URL.revokeObjectURL(n),r.removeAttribute("href")}),0),r.click()}n(96),n(142),n(143),n(144),n(146),n(65),n(66);var L=n(106),T=n.n(L),z=n(36),U=n.n(z),A=n(35),I=n(107);n(100),n(161);function G(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){G(i,r,o,a,s,"next",e)}function s(e){G(i,r,o,a,s,"throw",e)}a(void 0)}))}}function B(e,t){return F.apply(this,arguments)}function F(){return(F=q(regeneratorRuntime.mark((function e(t,n){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new r.Qb).name=t,o.encoding=n.encoding||r.N,H(t,o,n),e.prev=4,e.next=7,Object(A.a)(t,{crossorigin:"anonymous"});case 7:return i=e.sent,o.image=i,o.needsUpdate=!0,n.renderer&&n.renderer.initTexture(o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(4),new Error("Could not load texture ".concat(t));case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function H(e,t,n){if("boolean"==typeof n.flipY&&(t.flipY=n.flipY),void 0!==n.mapping&&(t.mapping=n.mapping),void 0!==n.format)t.format=n.format;else{var o=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data:image\/jpeg/);t.format=o?r.Bb:r.yb}n.repeat&&t.repeat.copy(n.repeat),t.wrapS=n.wrapS||r.i,t.wrapT=n.wrapT||r.i,t.minFilter=n.minFilter||r.P,t.magFilter=n.magFilter||r.O,t.generateMipmaps=!1!==n.generateMipmaps}n(163);var Y=n(108),N=n.n(Y),$=n(109);function X(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){X(i,r,o,a,s,"next",e)}function s(e){X(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Q(){return(Q=Z(regeneratorRuntime.mark((function e(t,n){var o,i,a,s,c,u,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.renderer){e.next=3;break}throw new Error("Env map requires renderer to passed in the options for ".concat(t,"!"));case 3:if(!n.equirectangular){e.next=17;break}return e.next=6,B(t,{renderer:o});case 6:if(i=e.sent,!n.pmrem){e.next=11;break}return e.abrupt("return",J(i,o));case 11:return a=N()(i.image.naturalHeight),s=new r.cc(a,{generateMipmaps:!0,minFilter:r.Q,magFilter:r.O}),c=s.fromEquirectangularTexture(o,i).texture,i.dispose(),i.image.data=null,e.abrupt("return",c);case 17:if(u=t,l=n.extension||".jpg",p=K("".concat(u.replace(/\/$/,""),"/"),l),".hdr"!==l){e.next=22;break}return e.abrupt("return",new Promise((function(e,t){(new $.a).load(r.Vb,p,(function(t){return e(W(t,n))}),null,(function(){return t(new Error("Could not load env map: ".concat(u)))}))})));case 22:return e.abrupt("return",new Promise((function(e,t){(new r.l).load(p,(function(t){return e(W(t,n))}),null,(function(){return t(new Error("Could not load env map: ".concat(u)))}))})));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return t.encoding&&(e.encoding=t.encoding),t.format&&(e.format=t.format),t.pmrem&&(e=function(e,t){var n=new r.ob(t);n.compileCubemapShader();var o=n.fromCubemap(e);return n.dispose(),e.dispose(),e.image.data=null,o.texture}(e,t.renderer)),e}function J(e,t){var n=new r.ob(t);n.compileEquirectangularShader();var o=n.fromEquirectangular(e);return n.dispose(),e.dispose(),e.image.data=null,o.texture}function K(e,t){return["".concat(e,"px").concat(t),"".concat(e,"nx").concat(t),"".concat(e,"py").concat(t),"".concat(e,"ny").concat(t),"".concat(e,"pz").concat(t),"".concat(e,"nz").concat(t)]}function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ne(i,r,o,a,s,"next",e)}function s(e){ne(i,r,o,a,s,"throw",e)}a(void 0)}))}}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var le=0;function pe(e){return"__private_"+le+++"_"+e}var fe=pe("queue"),he=pe("cache"),de=pe("onProgressListeners"),me=pe("asyncConcurrency"),ve=pe("logs"),ye=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,fe,{writable:!0,value:[]}),Object.defineProperty(this,he,{writable:!0,value:{}}),Object.defineProperty(this,de,{writable:!0,value:[]}),Object.defineProperty(this,me,{writable:!0,value:10}),Object.defineProperty(this,ve,{writable:!0,value:[]}),this.get=function(e){if(!e)throw new TypeError("Must specify an URL for AssetManager.get()");return ue(t,he)[he][e]}}var t,n,r,o,i;return t=e,(n=[{key:"addProgressListener",value:function(e){if("function"!=typeof e)throw new TypeError("onProgress must be a function");ue(this,de)[de].push(e)}},{key:"queue",value:function(e){var t=e.url,n=e.type,r=se(e,["url","type"]);if(!t)throw new TypeError("Must specify a URL or opt.url for AssetManager.queue()");return this._getQueued(t)||ue(this,fe)[fe].push(ie({url:t,type:n||this._extractType(t)},r)),t}},{key:"_getQueued",value:function(e){return ue(this,fe)[fe].find((function(t){return t.url===e}))}},{key:"_extractType",value:function(e){var t=e.slice(e.lastIndexOf("."));switch(!0){case/\.(gltf|glb)$/i.test(t):return"gltf";case/\.json$/i.test(t):return"json";case/\.svg$/i.test(t):return"svg";case/\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(t):return"image";case/\.(wav|mp3)$/i.test(t):return"audio";case/\.(mp4|webm|ogg|ogv)$/i.test(t):return"video";default:throw new Error("Could not load ".concat(e,", unknown file extension!"))}}},{key:"loadSingle",value:(i=re(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer,r=se(t,["renderer"]),n){e.next=3;break}throw new Error("You must provide a renderer to the loadSingle function.");case 3:return e.prev=3,o=Date.now(),e.next=7,this._loadItem(ie({renderer:n},r));case 7:return ue(this,he)[he][r.url]=e.sent,window.DEBUG&&console.log("\ud83d\udce6 Loaded single asset %c".concat(r.url,"%c in ").concat(U()(Date.now()-o)),"color:blue","color:black"),e.abrupt("return",r.url);case 12:e.prev=12,e.t0=e.catch(3),delete ue(this,he)[he][r.url],console.error("\ud83d\udce6 Asset ".concat(r.url," was not loaded:\n").concat(e.t0));case 16:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(e){return i.apply(this,arguments)})},{key:"load",value:(o=re(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer){e.next=3;break}throw new Error("You must provide a renderer to the load function.");case 3:if(r=ue(this,fe)[fe].slice(),ue(this,fe)[fe].length=0,0!==(o=r.length)){e.next=9;break}return setTimeout((function(){return ue(s,de)[de].forEach((function(e){return e(1)}))}),0),e.abrupt("return");case 9:return i=Date.now(),e.next=12,T()(r,function(){var e=re(regeneratorRuntime.mark((function e(t,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Date.now(),e.next=4,s._loadItem(ie({renderer:n},t));case 4:ue(s,he)[he][t.url]=e.sent,window.DEBUG&&s.log("Loaded %c".concat(t.url,"%c in ").concat(U()(Date.now()-i)),"color:blue","color:black"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s.logError("Asset ".concat(t.url," was not loaded:\n").concat(e.t0));case 11:a=(r+1)/o,ue(s,de)[de].forEach((function(e){return e(a)}));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),{concurrency:ue(this,me)[me]});case 12:window.DEBUG&&(0===(a=ue(this,ve)[ve].filter((function(e){return"error"===e.type}))).length?this.groupLog("\ud83d\udce6 Assets loaded in ".concat(U()(Date.now()-i)," \u23f1")):this.groupLog("\ud83d\udce6 %c Could not load ".concat(a.length," asset").concat(a.length>1?"s":""," "),"color:white;background:red;"));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_loadItem",value:function(e){var t=e.url,n=e.type,r=e.renderer,o=se(e,["url","type","renderer"]);if(t in ue(this,he)[he])return ue(this,he)[he][t];switch(n){case"gltf":return new Promise((function(e,n){(new I.a).load(t,e,null,(function(e){return n(new Error("Could not load GLTF asset ".concat(t,":\n").concat(e)))}))}));case"json":return fetch(t).then((function(e){return e.json()}));case"env-map":return function(e,t){return Q.apply(this,arguments)}(t,ie({renderer:r},o));case"svg":case"image":return Object(A.a)(t,{crossorigin:"anonymous"});case"texture":return B(t,ie({renderer:r},o));case"audio":return fetch(t).then((function(e){return e.arrayBuffer()}));case"video":return fetch(t).then((function(e){return e.blob()}));default:throw new Error("Could not load ".concat(t,", the type ").concat(n," is unknown!"))}}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ue(this,ve)[ve].push({type:"log",text:t})}},{key:"logError",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ue(this,ve)[ve].push({type:"error",text:t})}},{key:"groupLog",value:function(){var e;(e=console).groupCollapsed.apply(e,arguments),ue(this,ve)[ve].forEach((function(e){var t;(t=console)[e.type].apply(t,ee(e.text))})),console.groupEnd(),ue(this,ve)[ve].length=0}}])&&ce(t.prototype,n),r&&ce(t,r),e}());n(165),n(166);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=ye.queue({url:"assets/suzanne.gltf",type:"gltf"}),Se=ye.queue({url:"assets/spotty-metal/albedo.jpg",type:"texture"}),Ee=ye.queue({url:"assets/spotty-metal/metalness.jpg",type:"texture"}),ke=ye.queue({url:"assets/spotty-metal/roughness.jpg",type:"texture"}),_e=ye.queue({url:"assets/spotty-metal/normal.jpg",type:"texture"}),Ce=ye.queue({url:"assets/ouside-afternoon-blurred-hdr.jpg",type:"env-map",equirectangular:!0}),De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,n,o,i=Oe(a);function a(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t)).webgl=e,n.options=t;var o=ye.get(je).scene.clone(),s=new r.gb({map:ye.get(Se),metalnessMap:ye.get(Ee),roughnessMap:ye.get(ke),normalMap:ye.get(_e),normalScale:new r.Yb(2,2),envMap:ye.get(Ce),roughness:.5,metalness:.8});return o.traverse((function(e){e.isMesh&&(e.material=s)})),o.scale.multiplyScalar(1.2),n.add(o),n.webgl.scene.background=ye.get(Ce),n}return t=a,(n=[{key:"onPointerDown",value:function(e,t){var n=t.x,o=t.y,i=(new r.Yb).set(n/this.webgl.width*2-1,-o/this.webgl.height*2+1),a=new r.Db;a.setFromCamera(i,this.webgl.camera);var s=a.intersectObject(this,!0);console.log(s.length>0?"Hit ".concat(s[0].object.name,"!"):"No hit")}},{key:"onPointerMove",value:function(e,t){t.x,t.y}},{key:"onPointerUp",value:function(e,t){t.x,t.y}},{key:"update",value:function(e,t){this.rotation.y+=e*this.webgl.controls.angularVelocity}}])&&be(t.prototype,n),o&&be(t,o),a}(r.A);window.DEBUG=window.location.search.includes("debug");var Re=new V({canvas:document.querySelector("#app"),alpha:!0,background:"#111",backgroundAlpha:1,postprocessing:!0,showFps:window.DEBUG,orbitControls:window.DEBUG,controls:{angularVelocity:i.a.Slider(.1,{label:"Angular Velocity",min:.01,max:50,step:.01,mapping:function(e){return Math.pow(10,e)},inverseMapping:Math.log10})},hideControls:!window.DEBUG});window.DEBUG&&(window.webgl=Re),Re.canvas.style.visibility="hidden",ye.load({renderer:Re.renderer}).then((function(){Re.canvas.style.visibility="",Re.scene.suzanne=new De(Re),Re.scene.add(Re.scene.suzanne),function(e){var t=new r.C(16777215,16777215,.6);t.color.setHSL(.6,1,.6),t.groundColor.setHSL(.095,1,.75),t.position.set(0,50,0),e.scene.add(t);var n=new r.s(16777215,1);n.color.setHSL(.1,1,.95),n.position.set(3,5,1),n.position.multiplyScalar(50),e.scene.add(n)}(Re);var e,t,n=new a.c(new r.Hb({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"#define GLSLIFY 1\nfloat vignette(vec2 uv, float radius, float smoothness) {\n\tfloat diff = radius - distance(uv, vec2(0.5, 0.5));\n\treturn smoothstep(-smoothness, smoothness, diff);\n}\n\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 texColor = texture2D(tDiffuse, vUv);\n\n  float vignetteValue = vignette(vUv, 0.5, 0.5);\n  texColor.rgb *= vignetteValue;\n\n  gl_FragColor = texColor;\n}\n",uniforms:{tDiffuse:{type:"t",value:null}}}),"tDiffuse");Re.composer.addPass(n),window.DEBUG&&(e=Re,(t=document.createElement("div")).style.position="fixed",t.style.bottom=0,t.style.right=0,t.style.background="tomato",t.style.cursor="pointer",t.style.padding="8px 16px",t.style.color="white",t.style.fontSize="24px",t.textContent="Save screenshot",document.body.appendChild(t),t.addEventListener("click",e.saveScreenshot)),Re.start()}))}});
//# sourceMappingURL=app.fb20b974.js.map