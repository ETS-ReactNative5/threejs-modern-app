!function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;i.push([185,1]),n()}({177:function(e,t){},185:function(e,t,n){"use strict";n.r(t);n(42),n(24),n(56),n(87);var r,o=n(21),i=(n(59),n(62),n(38),n(137),n(94),n(30),n(95),n(69),n(139),n(97),n(140),n(0)),a=n(115),c=n(116),s=n.n(c),u=n(117),l=n.n(u),f=n(118),p=n(124),d=n(119),h=n.n(d),m=(n(103),n(104),n(105),n(156),n(157),n(159),n(160),n(161),n(74)),y=n.n(m),v=n(120),g=n.n(v);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){return Object.fromEntries(Object.entries(e).map((function(e,n){var r=j(e,2),o=r[0],i=r[1];return[o,t(i,o,n)]})))}function k(e){return y.a.Slider(e.value,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({min:e.min,max:e.max,step:e.step||.01},"exp"===e.scale&&{min:e.min||.01,mapping:function(e){return Math.pow(10,e)},inverseMapping:Math.log10}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=P(e,(function(e){return"object"===b(e)&&(e.hasOwnProperty("value")||e.hasOwnProperty("max")||e.hasOwnProperty("min")||e.hasOwnProperty("step"))?k(e):"object"===b(e)?P(e,(function(t){return"object"===b(t)&&(t.hasOwnProperty("value")||t.hasOwnProperty("max")||t.hasOwnProperty("min")||t.hasOwnProperty("step"))?k(t):e})):e})),o=y()(n),i=t.hideControls?o:g()(o,{expanded:!t.closeControls});if(!t.hideControls){var a='\n      [class^="controlPanel-"] [class*="__field"]::before {\n        content: initial !important;\n      }\n      [class^="controlPanel-"] [class*="__labelText"] {\n        text-indent: 6px !important;\n      }\n      [class^="controlPanel-"] [class*="__field--button"] > button::before {\n        content: initial !important;\n      }\n    ',c=document.createElement("style");c.type="text/css",c.innerHTML=a,document.head.appendChild(c)}return r=i,i}function E(e){"}"===e.slice(-1)&&(e=e.slice(0,-1));var t=e.indexOf(".controls.")+".controls.".length;return(e=e.slice(t)).trim()}function C(e,t){var n=E(t.toString());return r.$onChanges((function(t){t[n]&&(e[n]=t[n].value)})),t()}function R(e,t){var n=E(t.toString()),o=n.includes(".")?n.slice(n.lastIndexOf(".")+1):n;return r.$onChanges((function(t){t[n]&&(e.uniforms[o].value=t[n].value)})),{value:t()}}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function U(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var q=0;function B(e){return"__private_"+q+++"_"+e}var I=B("width"),Y=B("height"),F=B("capturer"),$=B("lastTime"),G=B("updateListeners"),X=B("pointerdownListeners"),H=B("pointermoveListeners"),N=B("pointerupListeners"),W=B("startX"),Q=B("startY"),J=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.background,c=void 0===r?"#111":r,s=n.backgroundAlpha,u=void 0===s?1:s,d=n.fov,m=void 0===d?45:d,y=n.frustumSize,v=void 0===y?3:y,g=n.near,b=void 0===g?.01:g,w=n.far,O=void 0===w?100:w,j=L(n,["background","backgroundAlpha","fov","frustumSize","near","far"]);A(this,e),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),this.isRunning=!1,this.time=0,this.dt=0,Object.defineProperty(this,$,{writable:!0,value:performance.now()}),Object.defineProperty(this,G,{writable:!0,value:[]}),Object.defineProperty(this,X,{writable:!0,value:[]}),Object.defineProperty(this,H,{writable:!0,value:[]}),Object.defineProperty(this,N,{writable:!0,value:[]}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?t.width:n,o=e.height,i=void 0===o?t.height:o,a=e.pixelRatio,c=void 0===a?t.pixelRatio:a;if(t.renderer.getPixelRatio()!==c&&t.renderer.setPixelRatio(c),t.renderer.setSize(r,i),t.camera.isPerspectiveCamera)t.camera.aspect=r/i;else{var s=r/i;t.camera.left=-t.camera.frustumSize*s/2,t.camera.right=t.camera.frustumSize*s/2,t.camera.top=t.camera.frustumSize/2,t.camera.bottom=-t.camera.frustumSize/2}return t.camera.updateProjectionMatrix(),t.composer&&t.composer.setSize(),t.scene.traverse((function(e){"function"==typeof e.resize&&e.resize({width:r,height:i,pixelRatio:c})})),t.draw(),t},this.saveScreenshot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?1920:n,o=e.height,i=void 0===o?1080:o,a=e.fileName,c=void 0===a?"Screenshot.png":a;t.resize({width:r,height:i,pixelRatio:1}),t.draw();var s=t.canvas.toDataURL("image/png");t.resize(),t.draw(),Z(c,s)},this.startRecording=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?1920:n,o=e.height,i=void 0===o?1080:o,a=e.fileName,c=void 0===a?"Recording":a,s=e.format,u=void 0===s?"gif":s,l=L(e,["width","height","fileName","format"]);U(t,F)[F]||(t.resize({width:r,height:i,pixelRatio:1}),t.draw(),U(t,F)[F]=new h.a(_({format:u,name:c,workersPath:"",motionBlurFrames:2},l)),U(t,F)[F].start())},this.stopRecording=function(){U(t,F)[F]&&(U(t,F)[F].stop(),U(t,F)[F].save(),U(t,F)[F]=void 0,t.resize(),t.draw())},this.update=function(e,n,r){return t.orbitControls&&t.orbitControls.update(),t.scene.traverse((function(t){"function"!=typeof t.update||t.isTransformControls||t.update(e,n,r)})),t.world&&(t.world.step(1/60,e),t.cannonDebugger&&t.cannonDebugger.update(),t.world.bodies.forEach((function(t){"function"==typeof t.update&&t.update(e,n)}))),U(t,G)[G].forEach((function(t){return t(e,n,r)})),t},this.draw=function(){return t.composer?t.composer.render(t.dt):t.renderer.render(t.scene,t.camera),t},this.start=function(){if(!t.isRunning)return t.renderer.setAnimationLoop(t.animate),t.isRunning=!0,t},this.stop=function(){if(t.isRunning)return t.renderer.setAnimationLoop(null),t.isRunning=!1,t},this.animate=function(e,n){t.isRunning&&(t.stats&&t.stats.begin(),t.dt=Math.min(t.maxDeltaTime,(e-U(t,$)[$])/1e3),t.time+=t.dt,U(t,$)[$]=e,t.update(t.dt,t.time,n),t.draw(),U(t,F)[F]&&U(t,F)[F].capture(t.canvas),t.stats&&t.stats.end())},this.renderer=new i.gc(_({antialias:!j.postprocessing,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0},j)),void 0!==j.sortObjects&&(this.renderer.sortObjects=j.sortObjects),j.gamma&&(this.renderer.outputEncoding=i.hc),j.xr&&(this.renderer.xr.enabled=!0),this.canvas=this.renderer.domElement,this.renderer.setClearColor(c,u),U(this,I)[I]=j.width,U(this,Y)[Y]=j.height,this.maxPixelRatio=j.maxPixelRatio||2,this.maxDeltaTime=j.maxDeltaTime||1/30;var x=U(this,I)[I]/U(this,Y)[Y];if(j.orthographic?(this.camera=new i.ob(-v*x/2,v*x/2,v/2,-v/2,b,O),this.camera.frustumSize=v):this.camera=new i.qb(m,x,b,O),this.camera.position.copy(j.cameraPosition||new i.ac(0,0,4)),this.camera.lookAt(0,0,0),this.scene=new i.Hb,this.gl=this.renderer.getContext(),window.addEventListener("resize",this.resize),window.addEventListener("orientationchange",this.resize),this.resize(),this.isDragging=!1,this.canvas.addEventListener("pointerdown",(function(e){e.isPrimary&&(t.isDragging=!0,U(t,W)[W]=e.offsetX,U(t,Q)[Q]=e.offsetY,t.scene.traverse((function(t){"function"==typeof t.onPointerDown&&t.onPointerDown(e,{x:e.offsetX,y:e.offsetY})})),U(t,X)[X].forEach((function(t){return t(e,{x:e.offsetX,y:e.offsetY})})))})),this.canvas.addEventListener("pointermove",(function(e){if(e.isPrimary){var n=_(_({x:e.offsetX,y:e.offsetY},void 0!==U(t,W)[W]&&{dragX:e.offsetX-U(t,W)[W]}),void 0!==U(t,Q)[Q]&&{dragY:e.offsetY-U(t,Q)[Q]});t.scene.traverse((function(t){"function"==typeof t.onPointerMove&&t.onPointerMove(e,n)})),U(t,H)[H].forEach((function(t){return t(e,n)}))}})),this.canvas.addEventListener("pointerup",(function(e){if(e.isPrimary){t.isDragging=!1;var n=_(_({x:e.offsetX,y:e.offsetY},void 0!==U(t,W)[W]&&{dragX:e.offsetX-U(t,W)[W]}),void 0!==U(t,Q)[Q]&&{dragY:e.offsetY-U(t,Q)[Q]});t.scene.traverse((function(t){"function"==typeof t.onPointerUp&&t.onPointerUp(e,n)})),U(t,N)[N].forEach((function(t){return t(e,n)})),U(t,W)[W]=void 0,U(t,Q)[Q]=void 0}})),j.postprocessing){var P=this.gl.getParameter(this.gl.MAX_SAMPLES);this.composer=new o.a(this.renderer,_({multisampling:Math.min(8,P),frameBufferType:j.gamma?i.C:void 0},j)),this.composer.addPass(new o.c(this.scene,this.camera))}j.orbitControls&&(this.orbitControls=new a.a(this.camera,this.canvas),this.orbitControls.enableDamping=!0,this.orbitControls.dampingFactor=.15,this.orbitControls.enablePan=!1,j.orbitControls instanceof Object&&Object.keys(j.orbitControls).forEach((function(e){t.orbitControls[e]=j.orbitControls[e]}))),j.world&&(this.world=j.world,j.showWorldWireframes&&(this.cannonDebugger=Object(p.a)(this.scene,this.world.bodies,{autoUpdate:!1}))),j.showFps&&(this.stats=new l.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)),j.controls&&(this.controls=S(j.controls,j)),this.loadGPUTier=Object(f.a)({glContext:this.gl}).then((function(e){t.gpu={name:e.gpu,tier:e.tier,isMobile:e.isMobile,fps:e.fps}}))}return z(e,[{key:"background",get:function(){return this.render.getClearColor(new i.j)}},{key:"backgroundAlpha",get:function(){return this.render.getClearAlpha()}},{key:"isRecording",get:function(){return Boolean(U(this,F)[F])}}]),z(e,[{key:"onUpdate",value:function(e){U(this,G)[G].push(e)}},{key:"onPointerDown",value:function(e){U(this,X)[X].push(e)}},{key:"onPointerMove",value:function(e){U(this,H)[H].push(e)}},{key:"onPointerUp",value:function(e){U(this,N)[N].push(e)}},{key:"offUpdate",value:function(e){var t=U(this,G)[G].indexOf(e);-1!==t&&U(this,G)[G].splice(t,1)}},{key:"offPointerDown",value:function(e){var t=U(this,X)[X].indexOf(e);-1!==t&&U(this,X)[X].splice(t,1)}},{key:"offPointerMove",value:function(e){var t=U(this,H)[H].indexOf(e);-1!==t&&U(this,H)[H].splice(t,1)}},{key:"offPointerUp",value:function(e){var t=U(this,N)[N].indexOf(e);-1!==t&&U(this,N)[N].splice(t,1)}},{key:"width",get:function(){return U(this,I)[I]||window.innerWidth}},{key:"height",get:function(){return U(this,Y)[Y]||window.innerHeight}},{key:"pixelRatio",get:function(){return Math.min(this.maxPixelRatio,window.devicePixelRatio)}},{key:"cursor",get:function(){return this.canvas.style.cursor},set:function(e){this.canvas.style.cursor=e||null}}]),e}();function Z(e,t){var n=s()(t),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(n),r.onclick=setTimeout((function(){window.URL.revokeObjectURL(n),r.removeAttribute("href")}),0),r.click()}n(71),n(165),n(166),n(72),n(73);var K=n(121),V=n.n(K),ee=n(41),te=n.n(ee),ne=n(40),re=n(122);n(112),n(179);function oe(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){oe(i,r,o,a,c,"next",e)}function c(e){oe(i,r,o,a,c,"throw",e)}a(void 0)}))}}function ae(e,t){return ce.apply(this,arguments)}function ce(){return(ce=ie(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new i.Rb).name=t,r.encoding=n.encoding||i.O,se(t,r,n),e.prev=4,e.next=7,Object(ne.a)(t,{crossorigin:"anonymous"});case 7:return o=e.sent,r.image=o,r.needsUpdate=!0,n.renderer&&n.renderer.initTexture(r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(4),new Error("Could not load texture ".concat(t));case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function se(e,t,n){if("boolean"==typeof n.flipY&&(t.flipY=n.flipY),void 0!==n.mapping&&(t.mapping=n.mapping),void 0!==n.format)t.format=n.format;else{var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data:image\/jpeg/);t.format=r?i.Cb:i.zb}n.repeat&&t.repeat.copy(n.repeat),t.wrapS=n.wrapS||i.i,t.wrapT=n.wrapT||i.i,t.minFilter=n.minFilter||i.Q,t.magFilter=n.magFilter||i.P,t.generateMipmaps=!1!==n.generateMipmaps}n(113);var ue=n(123),le=n.n(ue),fe=n(125);function pe(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pe(i,r,o,a,c,"next",e)}function c(e){pe(i,r,o,a,c,"throw",e)}a(void 0)}))}}function he(){return(he=de(regeneratorRuntime.mark((function e(t,n){var r,o,a,c,s,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.renderer){e.next=3;break}throw new Error("Env map requires renderer to passed in the options for ".concat(t,"!"));case 3:if(!n.equirectangular){e.next=17;break}return e.next=6,ae(t,{renderer:r});case 6:if(o=e.sent,!n.pmrem){e.next=11;break}return e.abrupt("return",ye(o,r));case 11:return a=le()(o.image.naturalHeight),c=new i.dc(a,{generateMipmaps:!0,minFilter:i.R,magFilter:i.P}),s=c.fromEquirectangularTexture(r,o).texture,o.dispose(),o.image.data=null,e.abrupt("return",s);case 17:if(u=t,l=n.extension||".jpg",f=ve("".concat(u.replace(/\/$/,""),"/"),l),".hdr"!==l){e.next=22;break}return e.abrupt("return",new Promise((function(e,t){(new fe.a).load(i.Wb,f,(function(t){return e(me(t,n))}),null,(function(){return t(new Error("Could not load env map: ".concat(u)))}))})));case 22:return e.abrupt("return",new Promise((function(e,t){(new i.l).load(f,(function(t){return e(me(t,n))}),null,(function(){return t(new Error("Could not load env map: ".concat(u)))}))})));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return t.encoding&&(e.encoding=t.encoding),t.format&&(e.format=t.format),t.pmrem&&(e=function(e,t){var n=new i.pb(t);n.compileCubemapShader();var r=n.fromCubemap(e);return n.dispose(),e.dispose(),e.image.data=null,r.texture}(e,t.renderer)),e}function ye(e,t){var n=new i.pb(t);n.compileEquirectangularShader();var r=n.fromEquirectangular(e);return n.dispose(),e.dispose(),e.image.data=null,r.texture}function ve(e,t){return["".concat(e,"px").concat(t),"".concat(e,"nx").concat(t),"".concat(e,"py").concat(t),"".concat(e,"ny").concat(t),"".concat(e,"pz").concat(t),"".concat(e,"nz").concat(t)]}function ge(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){we(i,r,o,a,c,"next",e)}function c(e){we(i,r,o,a,c,"throw",e)}a(void 0)}))}}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ce=0;function Re(e){return"__private_"+Ce+++"_"+e}var De=Re("queue"),_e=Re("cache"),Me=Re("onProgressListeners"),Le=Re("asyncConcurrency"),Ae=Re("logs"),Te=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,De,{writable:!0,value:[]}),Object.defineProperty(this,_e,{writable:!0,value:{}}),Object.defineProperty(this,Me,{writable:!0,value:[]}),Object.defineProperty(this,Le,{writable:!0,value:10}),Object.defineProperty(this,Ae,{writable:!0,value:[]}),this.get=function(e){if(!e)throw new TypeError("Must specify an URL for AssetManager.get()");return Ee(t,_e)[_e][e]}}var t,n,r,o,i;return t=e,(n=[{key:"addProgressListener",value:function(e){if("function"!=typeof e)throw new TypeError("onProgress must be a function");Ee(this,Me)[Me].push(e)}},{key:"queue",value:function(e){var t=e.url,n=e.type,r=ke(e,["url","type"]);if(!t)throw new TypeError("Must specify a URL or opt.url for AssetManager.queue()");return this._getQueued(t)||Ee(this,De)[De].push(xe({url:t,type:n||this._extractType(t)},r)),t}},{key:"_getQueued",value:function(e){return Ee(this,De)[De].find((function(t){return t.url===e}))}},{key:"_extractType",value:function(e){var t=e.slice(e.lastIndexOf("."));switch(!0){case/\.(gltf|glb)$/i.test(t):return"gltf";case/\.json$/i.test(t):return"json";case/\.svg$/i.test(t):return"svg";case/\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(t):return"image";case/\.(wav|mp3)$/i.test(t):return"audio";case/\.(mp4|webm|ogg|ogv)$/i.test(t):return"video";default:throw new Error("Could not load ".concat(e,", unknown file extension!"))}}},{key:"loadSingle",value:(i=Oe(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer,r=ke(t,["renderer"]),n){e.next=3;break}throw new Error("You must provide a renderer to the loadSingle function.");case 3:return e.prev=3,o=Date.now(),e.next=7,this._loadItem(xe({renderer:n},r));case 7:return Ee(this,_e)[_e][r.url]=e.sent,window.DEBUG&&console.log("\ud83d\udce6 Loaded single asset %c".concat(r.url,"%c in ").concat(te()(Date.now()-o)),"color:blue","color:black"),e.abrupt("return",r.url);case 12:e.prev=12,e.t0=e.catch(3),delete Ee(this,_e)[_e][r.url],console.error("\ud83d\udce6 Asset ".concat(r.url," was not loaded:\n").concat(e.t0));case 16:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(e){return i.apply(this,arguments)})},{key:"load",value:(o=Oe(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer){e.next=3;break}throw new Error("You must provide a renderer to the load function.");case 3:if(r=Ee(this,De)[De].slice(),Ee(this,De)[De].length=0,0!==(o=r.length)){e.next=9;break}return setTimeout((function(){return Ee(c,Me)[Me].forEach((function(e){return e(1)}))}),0),e.abrupt("return");case 9:return i=Date.now(),e.next=12,V()(r,function(){var e=Oe(regeneratorRuntime.mark((function e(t,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Date.now(),e.next=4,c._loadItem(xe({renderer:n},t));case 4:Ee(c,_e)[_e][t.url]=e.sent,window.DEBUG&&c.log("Loaded %c".concat(t.url,"%c in ").concat(te()(Date.now()-i)),"color:blue","color:black"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.logError("Asset ".concat(t.url," was not loaded:\n").concat(e.t0));case 11:a=(r+1)/o,Ee(c,Me)[Me].forEach((function(e){return e(a)}));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),{concurrency:Ee(this,Le)[Le]});case 12:window.DEBUG&&(0===(a=Ee(this,Ae)[Ae].filter((function(e){return"error"===e.type}))).length?this.groupLog("\ud83d\udce6 Assets loaded in ".concat(te()(Date.now()-i)," \u23f1")):this.groupLog("\ud83d\udce6 %c Could not load ".concat(a.length," asset").concat(a.length>1?"s":""," "),"color:white;background:red;"));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_loadItem",value:function(e){var t=e.url,n=e.type,r=e.renderer,o=ke(e,["url","type","renderer"]);if(t in Ee(this,_e)[_e])return Ee(this,_e)[_e][t];switch(n){case"gltf":return new Promise((function(e,n){(new re.a).load(t,e,null,(function(e){return n(new Error("Could not load GLTF asset ".concat(t,":\n").concat(e)))}))}));case"json":return fetch(t).then((function(e){return e.json()}));case"env-map":return function(e,t){return he.apply(this,arguments)}(t,xe({renderer:r},o));case"svg":case"image":return Object(ne.a)(t,{crossorigin:"anonymous"});case"texture":return ae(t,xe({renderer:r},o));case"audio":return fetch(t).then((function(e){return e.arrayBuffer()}));case"video":return fetch(t).then((function(e){return e.blob()}));default:throw new Error("Could not load ".concat(t,", the type ").concat(n," is unknown!"))}}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ee(this,Ae)[Ae].push({type:"log",text:t})}},{key:"logError",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ee(this,Ae)[Ae].push({type:"error",text:t})}},{key:"groupLog",value:function(){var e;(e=console).groupCollapsed.apply(e,arguments),Ee(this,Ae)[Ae].forEach((function(e){var t;(t=console)[e.type].apply(t,ge(e.text))})),console.groupEnd(),Ee(this,Ae)[Ae].length=0}}])&&Se(t.prototype,n),r&&Se(t,r),e}());n(181),n(182),n(183),n(184);function ze(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ue(e,t){var n=t.defines,r=void 0===n?"":n,o=t.head,i=void 0===o?"":o,a=t.main,c=void 0===a?"":a,s=t.objectNormal,u=t.transformed,l=ze(t,["defines","head","main","objectNormal","transformed"]),f=e;Object.keys(l).forEach((function(e){var t,n,r;t=f,n=e,r=l[e],f=t.split(n).join(r)})),f=f.replace("void main() {","\n    ".concat(i,"\n    void main() {\n      ").concat(c,"\n    ")),u&&f.includes("#include <begin_vertex>")&&(f=f.replace("#include <begin_vertex>","#include <begin_vertex>\n      ".concat(u,"\n      "))),s&&f.includes("#include <beginnormal_vertex>")&&(f=f.replace("#include <beginnormal_vertex>","#include <beginnormal_vertex>\n      ".concat(s,"\n      ")));var p=Object.keys(r).map((function(e){return"#define ".concat(e," ").concat(r[e])})).join("\n");return"\n    ".concat(p,"\n    ").concat(f,"\n  ")}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=Te.queue({url:"assets/suzanne.gltf",type:"gltf"}),He=Te.queue({url:"assets/spotty-metal/albedo.jpg",type:"texture"}),Ne=Te.queue({url:"assets/spotty-metal/metalness.jpg",type:"texture"}),We=Te.queue({url:"assets/spotty-metal/roughness.jpg",type:"texture"}),Qe=Te.queue({url:"assets/spotty-metal/normal.jpg",type:"texture"}),Je=Te.queue({url:"assets/ouside-afternoon-blurred-hdr.jpg",type:"env-map",equirectangular:!0}),Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(a,e);var t,n,r,o=Fe(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Be(this,a),(t=o.call(this,n)).webgl=e,t.options=n;var r=Te.get(Xe),c=r.scene.clone(),s=Te.get(He),u=Te.get(Je);s.encoding=i.hc,u.encoding=i.hc;var l=new i.hb({map:s,metalnessMap:Te.get(Ne),roughnessMap:Te.get(We),normalMap:Te.get(Qe),normalScale:new i.Zb(2,2),envMap:u,roughness:e.controls.roughness,metalness:1});return t.material=l,C(l,(function(){return e.controls.roughness})),l.onBeforeCompile=function(t){l.uniforms=t.uniforms,t.uniforms.time={value:0},t.uniforms.frequency=R(t,(function(){return e.controls.movement.frequency})),t.uniforms.amplitude=R(t,(function(){return e.controls.movement.amplitude})),t.vertexShader=Ue(t.vertexShader,{head:"\n          uniform float time;\n          uniform float frequency;\n          uniform float amplitude;\n\n          // you could import glsl packages like this\n          // #pragma glslify: noise = require(glsl-noise/simplex/3d)\n        ",main:"\n          float theta = sin(position.z * frequency + time) * amplitude;\n          float c = cos(theta);\n          float s = sin(theta);\n          mat3 deformMatrix = mat3(c, 0, s, 0, 1, 0, -s, 0, c);\n        ",objectNormal:"\n          objectNormal *= deformMatrix;\n        ",transformed:"\n          transformed *= deformMatrix;\n        "})},c.traverse((function(e){e.isMesh&&(e.material=l)})),c.scale.multiplyScalar(1.2),t.add(c),t.webgl.scene.background=u,t}return t=a,(n=[{key:"onPointerDown",value:function(e,t){var n=t.x,r=t.y,o=(new i.Zb).set(n/this.webgl.width*2-1,-r/this.webgl.height*2+1),a=new i.Eb;a.setFromCamera(o,this.webgl.camera);var c=a.intersectObject(this,!0);console.log(c.length>0?"Hit ".concat(c[0].object.name,"!"):"No hit")}},{key:"onPointerMove",value:function(e,t){t.x,t.y}},{key:"onPointerUp",value:function(e,t){t.x,t.y}},{key:"update",value:function(e,t){this.material.uniforms&&(this.material.uniforms.time.value+=e*this.webgl.controls.movement.speed)}}])&&Ie(t.prototype,n),r&&Ie(t,r),a}(i.B);window.DEBUG=window.location.search.includes("debug");var Ke=new J({canvas:document.querySelector("#app"),alpha:!0,background:"#111",backgroundAlpha:1,gamma:!0,postprocessing:!0,showFps:window.DEBUG,orbitControls:window.DEBUG,controls:{roughness:.5,movement:{speed:{value:1.5,max:100,scale:"exp"},frequency:{value:.5,max:5},amplitude:{value:.7,max:2}}},hideControls:!window.DEBUG});window.DEBUG&&(window.webgl=Ke),Ke.canvas.style.visibility="hidden",Te.load({renderer:Ke.renderer}).then((function(){var e,t;Ke.canvas.style.visibility="",Ke.scene.suzanne=new Ze(Ke),Ke.scene.add(Ke.scene.suzanne),function(e){var t=new i.D(16777215,16777215,.6);t.color.setHSL(.6,1,.6),t.groundColor.setHSL(.095,1,.75),t.position.set(0,50,0),e.scene.add(t);var n=new i.t(16777215,1);n.color.setHSL(.1,1,.95),n.position.set(3,5,1),n.position.multiplyScalar(50),e.scene.add(n)}(Ke),Ke.composer.addPass(new o.b(Ke.camera,new o.d)),window.DEBUG&&(e=Ke,(t=document.createElement("div")).style.position="fixed",t.style.bottom=0,t.style.right=0,t.style.background="tomato",t.style.cursor="pointer",t.style.padding="8px 16px",t.style.margin="12px",t.style.borderRadius="3px",t.style.color="white",t.style.fontSize="24px",t.textContent="\ud83d\udcf8 Save screenshot",t.addEventListener("click",e.saveScreenshot),document.body.appendChild(t),function(e){var t=document.createElement("div");t.style.position="fixed",t.style.bottom=0,t.style.left=0,t.style.background="tomato",t.style.cursor="pointer",t.style.padding="8px 16px",t.style.margin="12px",t.style.borderRadius="3px",t.style.color="white",t.style.fontSize="24px",t.textContent="\ud83d\udd34 Start recording gif",t.addEventListener("click",(function(){e.isRecording?(e.stopRecording(),t.textContent="\ud83d\udd34 Start recording gif"):(e.startRecording(),t.textContent="\ud83d\udfe5 Stop recording gif")})),document.body.appendChild(t)}(Ke)),Ke.start()}))}});
//# sourceMappingURL=app.47fa24fe.js.map